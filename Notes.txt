# Spring Security
- when you add spring security by default a password will be generated for logging in
    to any request username: user
                   password: <generated and printed in console>
- when you visit any endpoint it will redirect you to localhost:8080/login page
    and in the login form, if you inspect you will see there is an input tag
    which has hidden _csrf attribute for "csrf attack". which is generated by server
    every time the page is loaded
    <input name="_csrf" type="hidden" value="YsUMoL0m7-cmYGwyPwRbAMPFaXA4sptC2wgl--qttUq0EyuYWv06lIwe2oULAg9QWylvMqbxREhdhv5vuWoSy9yehXqEIEj8">

- in application/storage of browser dev tools - you will find cookies or session details
- in network tab - you will find after clicking sign in - in payload _csrf token

# custome user and pass for spring basic security
spring.security.user.name=app
spring.security.user.password=pass

# Internal Working of Spring Security
1. incoming request
2. SecurityFilterChain: (fill data in spring security context from headers or request)
    - UsernamePasswordAuthenticationFilter
    - WebAsyncManagerIntegrationFilter
    - SecuritycontextPersistenceFilter
    - LogoutFilter
    - HeaderWriterFilter
    - etc
authentication responsibility is delegated
    |
3. Authentication Manager (return the authenticated user to filter)
    |
4. ProviderManager --> Authentication Provider (return the authenticated user to authentication manager)
    - DaoAuthenticationProvider
    - InMemoryAuthenticationPRovider
    - OAuth2AuthenticationProvider
    - etc
5. e.g DaoAuthenticationProvider
        |
6. UserDetailService(authenticate from DB) & PasswordEncoder
7. Security Filter will then call SecurityContextHolder
    set Authenticated user in context - SecurityContextHolder(SecurityContext)
         |
8. Dispatcher Servlet and controllers

# Steps for DaoAuthencation
1. user entity and implements UserDetails (getpassword, getUsername, getAuthorities)
2. create user repository with this method Optional<User> findByEmail();
3. create UserService implements UserDetailsService and implement the loadUserByUsername method
   - springProvider(authentication provider) will use this method to get the user from repository

InMemoryUserDetailManager: (users that we define in application.properties file)
    - The InMemoryUserDetailManager is a spring security provided implementation of
      UserDetailsService that stores user information in memory.
    - purpose: To store user details in memory, typically for testing or small application.
               you define users directly in the configuration.

4. PasswordEncoder:
    - The passwordEncoder interface is used for encoding and validating passwords.
      It has methods for encoding raw passwords and matching encoded passwords.
    - purpose: to securely hash passwords before storing them and to verify hashed passwords
               during authentication.
    - common implementations:
        - BCryptPasswordEncoder
        - Pbkdf2PasswordEncoder
        - SCryptPasswordEncoder

